(()=>{"use strict";const e=t=>{const n=document.querySelector("#timer-hours"),o=document.querySelector("#timer-minutes"),c=document.querySelector("#timer-seconds");let r=0;const s=e=>1===String(e).length?"0"+e:String(e),a=()=>{const a=(()=>{const e=(new Date(t).getTime()-(new Date).getTime())/1e3;let n=0,o=0,c=0;return e>0&&(n=Math.floor(e%60),o=Math.floor(e/60%60),c=Math.floor(e/60/60)),{timeRemaining:e,hours:c,minutes:o,seconds:n}})();if(n.textContent=s(a.hours),o.textContent=s(a.minutes),c.textContent=s(a.seconds),a.timeRemaining<0){const n=new Date(t);clearInterval(r),n.setDate(n.getDate()+1),e(n)}};a(),r=setInterval(a,1e3)};e("17 Jun 2021"),(()=>{const e=()=>{const e=event.target.closest('[href^="#"]');if(e){const t=window.pageYOffset,n=e.href.replace(/[^#]+(.*)/,"$1"),o=document.querySelector(n).getBoundingClientRect().top;let c=0;const r=e=>{c||(c=e);const n=e-c,s=o<0?Math.max(t-n/.5,t+o):Math.min(t+n/.5,t+o);window.scrollTo(0,s),s<t+o&&requestAnimationFrame(r)};requestAnimationFrame(r)}};document.body.addEventListener("click",(()=>{const t=event.target,n=()=>{document.querySelector("menu").classList.toggle("active-menu")};t.closest(".menu")||!t.closest("menu")&&document.querySelector("menu").classList.contains("active-menu")?n():t.closest("menu")&&t.closest('[href^="#"]')&&(n(),t.classList.contains("close-btn")||e())})),document.querySelector("main>a").addEventListener("click",e)})(),(()=>{const e=document.querySelector(".popup"),t=document.querySelectorAll(".popup-btn"),n=document.querySelector(".popup-content"),o={count:-445,speed:20,startPos:-445,endPos:0},c=()=>{o.startPos>o.endPos?o.count-=o.speed:o.count+=o.speed,n.style.transform=`translateY(${o.count}px)`,(o.startPos>o.endPos?o.count>o.endPos:o.count<o.endPos)&&requestAnimationFrame(c)};n.style.left="calc(50% - 20rem)",t.forEach((t=>{t.addEventListener("click",(()=>{e.style.display="block",screen.width>768&&(o.count=o.startPos,requestAnimationFrame(c))}))})),e.addEventListener("click",(t=>{let n=t.target;n.classList.contains("popup-close")?e.style.display="none":(n=n.closest(".popup-content"),n||(e.style.display="none"))}))})(),(()=>{const e=document.querySelector(".service-header"),t=e.querySelectorAll(".service-header-tab"),n=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{let o=e.target;o=o.closest(".service-header-tab"),o&&t.forEach(((e,c)=>{e===o&&(e=>{for(let o=0;o<n.length;o++)e===o?(t[o].classList.add("active"),n[o].classList.remove("d-none")):(t[o].classList.remove("active"),n[o].classList.add("d-none"))})(c)}))}))})(),(()=>{const e=document.querySelectorAll(".portfolio-item"),t=document.querySelector(".portfolio-dots");e.forEach((()=>{const e=document.createElement("li");e.classList.add("dot"),t.appendChild(e)})),t.children[0].classList.add("dot-active")})(),(()=>{const e=document.querySelector("#command .row"),t=()=>{const e=event.target;if(e.classList.contains("command__photo")){const t=e.src;e.src=e.dataset.img,e.dataset.img=t}};e.addEventListener("mouseover",t),e.addEventListener("mouseout",t)})(),((e=100)=>{const t=document.querySelector(".calc-block"),n=document.querySelector(".calc-type"),o=document.querySelector(".calc-square"),c=document.querySelector(".calc-count"),r=document.querySelector(".calc-day"),s=document.getElementById("total"),a=document.querySelectorAll("input.calc-item");t.addEventListener("change",(t=>{const a=t.target;(a.matches(".calc-type")||a.matches(".calc-square")||a.matches(".calc-count")||a.matches(".calc-day"))&&(()=>{let t=0,a=1,l=10;const i=n.options[n.selectedIndex].value,d=+o.value;c.value>1&&(a+=(c.value-1)/10),r.value&&r.value<5?l*=2:r.value&&r.value<10&&(l*=1.5),i&&d&&(t=e*i*d*a*l),(({timing:e,draw:t,duration:n})=>{const o=performance.now();requestAnimationFrame((function c(r){let s=(r-o)/n;s>1&&(s=1);const a=e(s);t(a),s<1&&requestAnimationFrame(c)}))})({duration:1500,timing:e=>e,draw(e){s.textContent=Math.floor(e*+t)}})})()})),a.forEach((e=>{e.addEventListener("input",(e=>{e.target.value=e.target.value.replace(/\D/g,"")}))}))})(100),(()=>{const e=document.querySelectorAll(".portfolio-item"),t=document.querySelectorAll(".dot"),n=document.querySelector(".portfolio-content");let o,c=0;const r=(e,t,n)=>{e[t].classList.remove(n)},s=(e,t,n)=>{e[t].classList.add(n)},a=()=>{r(e,c,"portfolio-item-active"),r(t,c,"dot-active"),c=c<e.length-1?c+1:0,s(e,c,"portfolio-item-active"),s(t,c,"dot-active")},l=(e=2e3)=>{o=setInterval(a,e)};n.addEventListener("click",(n=>{n.preventDefault();const o=n.target;o.matches(".portfolio-btn, .dot")&&(r(e,c,"portfolio-item-active"),r(t,c,"dot-active"),o.matches("#arrow-right")?c++:o.matches("#arrow-left")?c--:o.matches(".dot")&&t.forEach(((e,t)=>{e===o&&(c=t)})),c>=e.length&&(c=0),c<0&&(c=e.length-1),s(e,c,"portfolio-item-active"),s(t,c,"dot-active"))})),n.addEventListener("mouseover",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(o)})),n.addEventListener("mouseout",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&l()})),l()})(),(()=>{const e=()=>{const e=document.getElementById("form1-name"),t=document.getElementById("form2-name"),n=document.getElementById("form3-name"),o=document.getElementById("form1-email"),c=document.getElementById("form2-email"),r=document.getElementById("form3-email"),s=document.getElementById("form1-phone"),a=document.getElementById("form2-phone"),l=document.getElementById("form3-phone"),i=document.getElementById("form2-message"),d=e=>{e.target.value=e.target.value.replace(/[^а-яё ]/gi,"").replace(/\s+/g," ").split(" ").map((e=>""===e?e:e[0].toUpperCase()+e.slice(1))).join(" ")},m=e=>{e.target.value=e.target.value.replace(/[^a-z@\-_.']/gi,"").replace(/\s+/g,"")},u=e=>{e.target.value=e.target.value.replace(/[^+\d]/g,"")};e.addEventListener("input",d),t.addEventListener("input",d),n.addEventListener("input",d),o.addEventListener("input",m),c.addEventListener("input",m),r.addEventListener("input",m),s.addEventListener("input",u),a.addEventListener("input",u),l.addEventListener("input",u),i.addEventListener("input",(e=>{e.target.value=e.target.value.replace(/[^а-яё\d ,.!?-]/gi,"").replace(/\s+/g," ")}))};document.querySelectorAll("form").forEach((t=>{(t=>{const n=document.createElement("div");let o=0;const c=()=>{n.textContent="",clearInterval(o)},r=e=>{const t=document.createElement("img"),r={load:{message:" Загрузка...",img:"./images/message/load.gif"},error:{message:" Что-то пошло не так...",img:"./images/message/error.png"},success:{message:" Спасибо! Мы скоро с вами свяжемся!",img:"./images/message/success.png"}};n.textContent=r[e].message,t.src=r[e].img,t.style.cssText="width: 28px; margin-right: 0.7rem;",n.insertBefore(t,n.firstChild),"success"===e||"error"===e?o=setInterval(c,5e3):o>0&&clearInterval(o)};n.style.cssText="color: #fff; font-size: 1.7rem; margin: 1rem 0; display: flex; align-items: center; justify-content: center;",t.addEventListener("submit",(e=>{const o=new FormData(t),c={};e.preventDefault(),t.appendChild(n),r("load"),o.forEach(((e,t)=>{c[t]=e})),(e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"}))(c).then((e=>{if(200!==e.status)throw new Error(`Network status: ${e.status}`);r("success"),(e=>{[...e.elements].filter((e=>"button"!==e.tagName.toLowerCase()&&"button"!==e.type)).forEach((e=>e.value=""))})(t)})).catch((e=>{r("error"),console.error(e)}))})),t.addEventListener("input",e)})(t)}))})()})();