(()=>{"use strict";const e=t=>{const n=document.querySelector("#timer-hours"),o=document.querySelector("#timer-minutes"),c=document.querySelector("#timer-seconds");let s=0;const r=e=>1===String(e).length?"0"+e:String(e),a=()=>{const a=(()=>{const e=(new Date(t).getTime()-(new Date).getTime())/1e3;let n=0,o=0,c=0;return e>0&&(n=Math.floor(e%60),o=Math.floor(e/60%60),c=Math.floor(e/60/60)),{timeRemaining:e,hours:c,minutes:o,seconds:n}})();if(n.textContent=r(a.hours),o.textContent=r(a.minutes),c.textContent=r(a.seconds),a.timeRemaining<0){const n=new Date(t);clearInterval(s),n.setDate(n.getDate()+1),e(n)}};a(),s=setInterval(a,1e3)};e("17 Jun 2021"),(()=>{const e=()=>{const e=event.target.closest('[href^="#"]');if(e){const t=window.pageYOffset,n=e.href.replace(/[^#]+(.*)/,"$1"),o=document.querySelector(n).getBoundingClientRect().top;let c=0;const s=e=>{c||(c=e);const n=e-c,r=o<0?Math.max(t-n/.5,t+o):Math.min(t+n/.5,t+o);window.scrollTo(0,r),r<t+o&&requestAnimationFrame(s)};requestAnimationFrame(s)}};document.body.addEventListener("click",(()=>{const t=event.target,n=()=>{document.querySelector("menu").classList.toggle("active-menu")};t.closest(".menu")||!t.closest("menu")&&document.querySelector("menu").classList.contains("active-menu")?n():t.closest("menu")&&t.closest('[href^="#"]')&&(n(),t.classList.contains("close-btn")||e())})),document.querySelector("main>a").addEventListener("click",e)})(),(()=>{const e=document.querySelector(".popup"),t=document.querySelectorAll(".popup-btn"),n=document.querySelector(".popup-content"),o={count:-445,speed:20,startPos:-445,endPos:0},c=()=>{o.startPos>o.endPos?o.count-=o.speed:o.count+=o.speed,n.style.transform=`translateY(${o.count}px)`,(o.startPos>o.endPos?o.count>o.endPos:o.count<o.endPos)&&requestAnimationFrame(c)};n.style.left="calc(50% - 20rem)",t.forEach((t=>{t.addEventListener("click",(()=>{e.style.display="block",screen.width>768&&(o.count=o.startPos,requestAnimationFrame(c))}))})),e.addEventListener("click",(t=>{let n=t.target;n.classList.contains("popup-close")?e.style.display="none":(n=n.closest(".popup-content"),n||(e.style.display="none"))}))})(),(()=>{const e=document.querySelector(".service-header"),t=e.querySelectorAll(".service-header-tab"),n=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{let o=e.target;o=o.closest(".service-header-tab"),o&&t.forEach(((e,c)=>{e===o&&(e=>{for(let o=0;o<n.length;o++)e===o?(t[o].classList.add("active"),n[o].classList.remove("d-none")):(t[o].classList.remove("active"),n[o].classList.add("d-none"))})(c)}))}))})(),(()=>{const e=document.querySelectorAll(".portfolio-item"),t=document.querySelector(".portfolio-dots");e.forEach((()=>{const e=document.createElement("li");e.classList.add("dot"),t.appendChild(e)})),t.children[0].classList.add("dot-active")})(),(()=>{const e=document.querySelector("#command .row"),t=()=>{const e=event.target;if(e.classList.contains("command__photo")){const t=e.src;e.src=e.dataset.img,e.dataset.img=t}};e.addEventListener("mouseover",t),e.addEventListener("mouseout",t)})(),((e=100)=>{const t=document.querySelector(".calc-block"),n=document.querySelector(".calc-type"),o=document.querySelector(".calc-square"),c=document.querySelector(".calc-count"),s=document.querySelector(".calc-day"),r=document.getElementById("total");t.addEventListener("change",(t=>{const a=t.target;(a.matches(".calc-type")||a.matches(".calc-square")||a.matches(".calc-count")||a.matches(".calc-day"))&&(()=>{let t=0,a=1,l=10;const i=n.options[n.selectedIndex].value,d=+o.value;c.value>1&&(a+=(c.value-1)/10),s.value&&s.value<5?l*=2:s.value&&s.value<10&&(l*=1.5),i&&d&&(t=e*i*d*a*l),(({timing:e,draw:t,duration:n})=>{const o=performance.now();requestAnimationFrame((function c(s){let r=(s-o)/n;r>1&&(r=1);const a=e(r);t(a),r<1&&requestAnimationFrame(c)}))})({duration:1500,timing:e=>e,draw(e){r.textContent=Math.floor(e*+t)}})})()}))})(100),(()=>{const e=document.querySelectorAll(".portfolio-item"),t=document.querySelectorAll(".dot"),n=document.querySelector(".portfolio-content");let o,c=0;const s=(e,t,n)=>{e[t].classList.remove(n)},r=(e,t,n)=>{e[t].classList.add(n)},a=()=>{s(e,c,"portfolio-item-active"),s(t,c,"dot-active"),c=c<e.length-1?c+1:0,r(e,c,"portfolio-item-active"),r(t,c,"dot-active")},l=(e=2e3)=>{o=setInterval(a,e)};n.addEventListener("click",(n=>{n.preventDefault();const o=n.target;o.matches(".portfolio-btn, .dot")&&(s(e,c,"portfolio-item-active"),s(t,c,"dot-active"),o.matches("#arrow-right")?c++:o.matches("#arrow-left")?c--:o.matches(".dot")&&t.forEach(((e,t)=>{e===o&&(c=t)})),c>=e.length&&(c=0),c<0&&(c=e.length-1),r(e,c,"portfolio-item-active"),r(t,c,"dot-active"))})),n.addEventListener("mouseover",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(o)})),n.addEventListener("mouseout",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&l()})),l()})(),(()=>{const e=()=>{const e=document.querySelectorAll("input.calc-item"),t=document.getElementById("form1-name"),n=document.getElementById("form2-name"),o=document.getElementById("form3-name"),c=document.getElementById("form1-email"),s=document.getElementById("form2-email"),r=document.getElementById("form3-email"),a=document.getElementById("form1-phone"),l=document.getElementById("form2-phone"),i=document.getElementById("form3-phone"),d=document.getElementById("form2-message"),m=e=>{e.target.value=e.target.value.replace(/\D/g,"")},u=e=>{e.target.value=e.target.value.replace(/[^а-яё ]/gi,"").replace(/\s+/g," ").split(" ").map((e=>""===e?e:e[0].toUpperCase()+e.slice(1))).join(" ")},g=e=>{e.target.value=e.target.value.replace(/[^a-z@\-_.']/gi,"").replace(/\s+/g,"")},p=e=>{e.target.value=e.target.value.replace(/[^+\d]/g,"")};e.forEach((e=>{e.addEventListener("input",m)})),t.addEventListener("input",u),n.addEventListener("input",u),o.addEventListener("input",u),c.addEventListener("input",g),s.addEventListener("input",g),r.addEventListener("input",g),a.addEventListener("input",p),l.addEventListener("input",p),i.addEventListener("input",p),d.addEventListener("input",(e=>{e.target.value=e.target.value.replace(/[^а-яё\d ,.!?-]/gi,"").replace(/\s+/g," ")}))};document.querySelectorAll("form").forEach((t=>{(t=>{const n=document.createElement("div"),o=e=>{const t=document.createElement("img"),o={load:{message:" Загрузка...",img:"./images/message/load.gif"},error:{message:" Что-то пошло не так...",img:"./images/message/error.png"},success:{message:" Спасибо! Мы скоро с вами свяжемся!",img:"./images/message/success.png"}};n.textContent=o[e].message,t.src=o[e].img,t.style.cssText="width: 28px; margin-right: 0.7rem;",n.insertBefore(t,n.firstChild)};n.style.cssText="color: #fff; font-size: 1.7rem; margin: 1rem 0; display: flex; align-items: center; justify-content: center;",t.addEventListener("submit",(e=>{const c=new FormData(t),s={};e.preventDefault(),o("load"),t.appendChild(n),c.forEach(((e,t)=>{s[t]=e})),(e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"}))(s).then((e=>{if(200!==e.status)throw new Error(`Network status: ${e.status}`);o("success"),setTimeout((()=>{n.remove()}),5e3),(e=>{[...e.elements].filter((e=>"button"!==e.tagName.toLowerCase()&&"button"!==e.type)).forEach((e=>e.value=""))})(t)})).catch((e=>{o("error"),setTimeout((()=>{n.remove()}),5e3),console.error(e)}))})),t.addEventListener("input",e)})(t)}))})()})();